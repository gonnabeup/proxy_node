services:
  node:
    build:
      context: .
      dockerfile: Dockerfile
    env_file:
      - .env
    environment:
      - PROXY_NODE_NAME=${PROXY_NODE_NAME:-local}
      - PROXY_API_HOST=0.0.0.0
      - PROXY_API_PORT=${PROXY_API_PORT:-8080}
      - PROXY_HOST=0.0.0.0
      - CACHE_ENABLED=${CACHE_ENABLED:-1}
      - LOCAL_DATABASE_URL=${LOCAL_DATABASE_URL:-sqlite:///data/proxy_node.db}
    volumes:
      - node_data:/app/data
    ports:
      - "${PROXY_API_PORT:-8080}:8080"
      - "4000-4200:4000-4200"
    restart: unless-stopped

volumes:
  node_data:
